<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[关于MVP的一点事]]></title>
      <url>http://yoursite.com/2016/06/12/%E5%85%B3%E4%BA%8EMVP%E7%9A%84%E4%B8%80%E7%82%B9%E4%BA%8B/</url>
      <content type="html"><![CDATA[<blockquote>
<p>Android MVP模式对我们来说已经不陌生了，看到论坛和一些博客都在吹他，我就google了一下，然后试着试用一下，结合资料分享一下心得。</p>
</blockquote>
<h2 id="MVC模式"><a href="#MVC模式" class="headerlink" title="MVC模式"></a>MVC模式</h2><p>MVP模式是MVC模式在Android上的一种变体，要介绍MVP就得先介绍MVC。在MVC模式中，Activity应该是属于View这一层。而实质上，它既承担了View，同时也包含一些Controller的东西在里面。这对于开发与维护来说不太友好，耦合度大高了。把Activity的View和Controller抽离出来就变成了View和Presenter，这就是MVP模式。（摘抄）<br>MVC模式的结构分为三部分，实体层的Model，视图层的View，以及控制层的Controller<br><img src="/uploads/gymvp1.png" alt=""></p>
<ul>
<li><p>其中View层其实就是程序的UI界面，用于向用户展示数据以及接收用户的输入</p>
</li>
<li><p>而Model层就是JavaBean实体类，用于保存实例数据</p>
</li>
<li><p>Controller控制器用于更新UI界面和数据实例</p>
</li>
</ul>
<h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>在Android项目中，Activity和Fragment占据了大部分的开发工作。如果有一种设计模式（或者说代码结构）专门是为优化Activity和Fragment的代码而产生的，你说这种模式重要不？这就是MVP设计模式。</p>
<blockquote>
<p>MVP把Activity中的UI逻辑抽象成View接口，把业务逻辑抽象成Presenter接口，Model类还是原来的Model。</p>
</blockquote>
<p>这就是MVP模式，现在这样的话，Activity的工作的简单了，只用来响应生命周期，其他工作都丢到Presenter中去完成。从上图可以看出，Presenter是Model和View之间的桥梁，为了让结构变得更加简单，View并不能直接对Model进行操作，这也是MVP与MVC最大的不同之处。</p>
<h4 id="MVP模式的作用"><a href="#MVP模式的作用" class="headerlink" title="MVP模式的作用"></a>MVP模式的作用</h4><ul>
<li><p>分离了视图逻辑和业务逻辑，降低了耦合</p>
</li>
<li><p>Activity只处理生命周期的任务，代码变得更加简洁</p>
</li>
<li><p>视图逻辑和业务逻辑分别抽象到了View和Presenter的接口中去，提高代码的可阅读性</p>
</li>
<li><p>Presenter被抽象成接口，可以有多种具体的实现，所以方便进行单元测试</p>
</li>
<li><p>把业务逻辑抽到Presenter中去，避免后台线程引用着Activity导致Activity的资源无法被系统回收从而引起内存泄露和OOM</p>
</li>
</ul>
<h4 id="MVP模式的使用"><a href="#MVP模式的使用" class="headerlink" title="MVP模式的使用"></a>MVP模式的使用</h4><p><img src="/uploads/gymvp2.png" alt=""><br>上面一张简单的MVP模式的UML图，从图中可以看出，使用MVP，至少需要经历以下步骤：</p>
<ul>
<li><p>创建IPresenter接口，把所有业务逻辑的接口都放在这里，并创建它的实现PresenterCompl（在这里可以方便地查看业务功能，由于接口可以有多种实现所以也方便写单元测试）</p>
</li>
<li><p>创建IView接口，把所有视图逻辑的接口都放在这里，其实现类是当前的Activity/Fragment由UML图可以看出，Activity里包含了一个IPresenter，而PresenterCompl里又包含了一个IView并且依赖了Model。Activity里只保留对IPresenter的调用，其它工作全部留到PresenterCompl中实现</p>
</li>
<li><p>Model并不是必须有的，但是一定会有View和Presenter</p>
</li>
</ul>
<p>通过上面的介绍，MVP的主要特点就是把Activity里的许多逻辑都抽离到View和Presenter接口中去，并由具体的实现类来完成。这种写法多了许多IView和IPresenter的接口，在某种程度上加大了开发的工作量，刚开始使用MVP的小伙伴可能会觉得这种写法比较别扭，而且难以记住。其实一开始想太多也没有什么卵用，只要在具体项目中多写几次，就能熟悉MVP模式的写法，理解TA的意图，以及享受其带来的好处。</p>
<h4 id="MVP案例"><a href="#MVP案例" class="headerlink" title="MVP案例"></a>MVP案例</h4><p><a href="https://github.com/shun99/android-mvp-pattern" target="_blank" rel="external">github案例</a></p>
<p>##参考资料<br><a href="https://segmentfault.com/a/1190000003927200" target="_blank" rel="external">Android MVP模式 简单易懂的介绍方式</a><br><a href="http://www.kymjs.com/code/2015/11/09/01" target="_blank" rel="external">用MVP架构开发Android应用</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android网络请求]]></title>
      <url>http://yoursite.com/2016/06/06/Android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/</url>
      <content type="html"><![CDATA[<blockquote>
<p>安卓开发中网络请求是无法避免。不管你是加载图片，请求API数据还是从因特网上获得一个字节，你都是在使用网络。</p>
</blockquote>
<a id="more"></a>
<h2 id="HttpClient-与-HttpUrlConnection"><a href="#HttpClient-与-HttpUrlConnection" class="headerlink" title="HttpClient 与 HttpUrlConnection"></a>HttpClient 与 HttpUrlConnection</h2><ul>
<li><p>Android系统提供了两种HTTP通信类，HttpURLConnection和HttpClient。</p>
</li>
<li><p>HttpClient是apache的开源实现，HttpUrlConnection是安卓标准实现，安卓SDK虽然集成了HttpClient，但官方支持的却是HttpUrlConnection；</p>
</li>
<li><p>HttpUrlConnection直接支持GZIP压缩；HttpClient也支持，但要自己写代码处理；我们之前测试HttpUrlConnection的GZIP压缩在传大文件分包trunk时有问题，只适合小文件，不过这个BUG后来官方说已经修复了；</p>
</li>
<li><p>HttpUrlConnection直接支持系统级连接池，即打开的连接不会直接关闭，在一段时间内所有程序可共用；HttpClient当然也能做到，但毕竟不如官方直接系统底层支持好；</p>
</li>
<li><p>HttpUrlConnection直接在系统层面做了缓存策略处理，加快重复请求的速度。</p>
</li>
</ul>
<p>HttpUrlConnection网络请求的固定格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line"></span><br><span class="line">    private ImageView imageView;</span><br><span class="line"></span><br><span class="line">    //创建一个 Handler 对象，用户接收子线程发送的消息，然后更新 UI</span><br><span class="line">    private Handler handler = new Handler()&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void handleMessage(Message msg) &#123;</span><br><span class="line">            super.handleMessage(msg);</span><br><span class="line">            //将数据强转转化为 Bitmap,然后显示在 ImageView 控件中</span><br><span class="line">            imageView.setImageBitmap((Bitmap) msg.obj);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        imageView = (ImageView)findViewById(R.id.iv);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void getImage(View view) &#123;</span><br><span class="line">        //开启一个子线程 处理网络请求</span><br><span class="line">        new Thread(new Runnable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    //从页面获取 URL 地址</span><br><span class="line">                    EditText editText = (EditText)findViewById(R.id.et);</span><br><span class="line">                    String path = editText.getText().toString();</span><br><span class="line">                    //调用Android API 中的 TextUtils 工具类判断路径是否为空</span><br><span class="line">                    if (TextUtils.isEmpty(path)) &#123;</span><br><span class="line">                        Looper.prepare();</span><br><span class="line">                        Toast.makeText(MainActivity.this, &quot;请输入URL&quot;, 0).show();</span><br><span class="line">                        Looper.loop();</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    //获取网络请求地址</span><br><span class="line">                    URL url = new URL(path);</span><br><span class="line">                    //网络请求的基本步骤</span><br><span class="line">                    //获取 HttpURLConnection 链接对象</span><br><span class="line">                    HttpURLConnection connection =(HttpURLConnection)url.openConnection();</span><br><span class="line">                    connection.setRequestMethod(&quot;GET&quot;);//设置请求方法为 GET 方式</span><br><span class="line">                    connection.setConnectTimeout(50000);//设置链接超时时间</span><br><span class="line">                    connection.setReadTimeout(50000);//设置输入流读取超时时间</span><br><span class="line">                    connection.connect();//打开链接，发送请求</span><br><span class="line">                    //判断返回的状态码</span><br><span class="line">                    if(connection.getResponseCode()==200)&#123;</span><br><span class="line">                        //获取输入流对象</span><br><span class="line">                        InputStream inputStream = connection.getInputStream();</span><br><span class="line">                        //调用 Android API 提供的 BitmapFactory 工具类将字节流转化为位图</span><br><span class="line">                        Bitmap bitmap = BitmapFactory.decodeStream(inputStream);</span><br><span class="line">                        Message message = new Message();//创建一个新的消息</span><br><span class="line">                        message.obj = bitmap;//将数据绑定消息</span><br><span class="line">                        handler.sendMessage(message);//调用 handler 发送消息给主线程</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; catch (Exception e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="okhttp"><a href="#okhttp" class="headerlink" title="okhttp"></a>okhttp</h2><p><a href="http://blog.csdn.net/lmj623565791/article/details/47911083" target="_blank" rel="external">Android OkHttp完全解析 是时候来了解OkHttp了</a></p>
<p>OkHttp是一个相对成熟的解决方案，据说Android4.4的源码中可以看到HttpURLConnection已经替换成OkHttp实现了。所以我们更有理由相信OkHttp的强大。</p>
<ul>
<li>使用范围</li>
</ul>
<p>OkHttp支持Android 2.3及其以上版本。</p>
<p>对于Java, JDK1.7以上。</p>
<h4 id="Http-Get"><a href="#Http-Get" class="headerlink" title="Http Get"></a>Http Get</h4><p>对了网络加载库，那么最常见的肯定就是http get请求了，比如获取一个网页的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//创建okHttpClient对象</span><br><span class="line"></span><br><span class="line">OkHttpClient mOkHttpClient = new OkHttpClient();</span><br><span class="line"></span><br><span class="line">//创建一个Request</span><br><span class="line"></span><br><span class="line">final Request request = new Request.Builder().url(&quot;https://github.com/hongyangAndroid&quot;).build();</span><br><span class="line"></span><br><span class="line">    //new call</span><br><span class="line"></span><br><span class="line">    Call call = mOkHttpClient.newCall(request);</span><br><span class="line"></span><br><span class="line">    //请求加入调度</span><br><span class="line"></span><br><span class="line">    call.enqueue(new Callback()&#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line"></span><br><span class="line">        public void onFailure(Request request, IOException e)&#123;&#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line"></span><br><span class="line">        public void onResponse(final Response response) throws IOException&#123;</span><br><span class="line"></span><br><span class="line">        //String htmlStr =  response.body().string();&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>看到这，你会发现，整体的写法还是比较长的，所以封装肯定是要做的，不然每个请求这么写，得累死。</p>
<ul>
<li>以上就是发送一个get请求的步骤，首先构造一个Request对象，参数最起码有个url，当然你可以通过Request.Builder设置更多的参数比如：header、method等。</li>
</ul>
<ul>
<li>然后通过request的对象去构造得到一个Call对象，类似于将你的请求封装成了任务，既然是任务，就会有execute()和cancel()等方法。</li>
</ul>
<ul>
<li>最后，我们希望以异步的方式去执行请求，所以我们调用的是call.enqueue，将call加入调度队列，然后等待任务执行完成，我们在Callback中即可得到结果。</li>
</ul>
<ul>
<li>onResponse回调的参数是response，一般情况下，比如我们希望获得返回的字符串，可以通过response.body().string()获取；如果希望获得返回的二进制字节数组，则调用response.body().bytes()；如果你想拿到返回的inputStream，则调用response.body().byteStream()</li>
</ul>
<p>看到这，你可能会奇怪，竟然还能拿到返回的inputStream，看到这个最起码能意识到一点，这里支持大文件下载，有inputStream我们就可以通过IO的方式写文件。不过也说明一个问题，这个onResponse执行的线程并不是UI线程。的确是的，如果你希望操作控件，还是需要使用handler等，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public void onResponse(final Response response) throws IOException&#123;</span><br><span class="line"></span><br><span class="line">      final String res = response.body().string();</span><br><span class="line"></span><br><span class="line">      runOnUiThread(new Runnable()&#123;</span><br><span class="line"></span><br><span class="line">          @Override</span><br><span class="line"></span><br><span class="line">          public void run()&#123;</span><br><span class="line"></span><br><span class="line">            mTv.setText(res);</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们这里是异步的方式去执行，当然也支持阻塞的方式，上面我们也说了Call有一个execute()方法，你也可以直接调用call.execute()通过返回一个Response。</li>
</ul>
<h4 id="Http-Post-携带参数"><a href="#Http-Post-携带参数" class="headerlink" title="Http Post 携带参数"></a>Http Post 携带参数</h4><p>看来上面的简单的get请求，基本上整个的用法也就掌握了，比如post携带参数，也仅仅是Request的构造的不同。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Request request = buildMultipartFormRequest(url, new File[]&#123;file&#125;, new String[]&#123;fileKey&#125;, null);</span><br><span class="line"></span><br><span class="line">FormEncodingBuilder builder = new FormEncodingBuilder();</span><br><span class="line"></span><br><span class="line">builder.add(&quot;username&quot;,&quot;张鸿洋&quot;);</span><br><span class="line"></span><br><span class="line">Request request = new Request.Builder().url(url).post(builder.build()).build();</span><br><span class="line"></span><br><span class="line">mOkHttpClient.newCall(request).enqueue(new Callback()&#123;...&#125;);</span><br></pre></td></tr></table></figure>
<p>大家都清楚，post的时候，参数是包含在请求体中的；所以我们通过FormEncodingBuilder。添加多个String键值对，然后去构造RequestBody，最后完成我们Request的构造。</p>
<h4 id="基于Http的文件上传"><a href="#基于Http的文件上传" class="headerlink" title="基于Http的文件上传"></a>基于Http的文件上传</h4><p>接下来我们在介绍一个可以构造RequestBody的Builder，叫做MultipartBuilder。当我们需要做类似于表单上传的时候，就可以使用它来构造我们的requestBody。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">File file = new File(Environment.getExternalStorageDirectory(), &quot;balabala.mp4&quot;);</span><br><span class="line"></span><br><span class="line">RequestBody fileBody = RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;), file);</span><br><span class="line"></span><br><span class="line">RequestBody requestBody = new MultipartBuilder()</span><br><span class="line"></span><br><span class="line">	.type(MultipartBuilder.FORM)</span><br><span class="line"></span><br><span class="line">    .addPart(Headers.of(</span><br><span class="line"></span><br><span class="line">    	&quot;Content-Disposition&quot;,</span><br><span class="line"></span><br><span class="line">    	&quot;form-data; name=\&quot;username\&quot;&quot;),</span><br><span class="line"></span><br><span class="line">        RequestBody.create(null, &quot;张鸿洋&quot;))</span><br><span class="line"></span><br><span class="line">	.addPart(Headers.of(</span><br><span class="line"></span><br><span class="line">         &quot;Content-Disposition&quot;,</span><br><span class="line"></span><br><span class="line">         &quot;form-data; name=\&quot;mFile\&quot;;</span><br><span class="line"></span><br><span class="line">         filename=\&quot;wjd.mp4\&quot;&quot;), fileBody)</span><br><span class="line"></span><br><span class="line">	.build();</span><br><span class="line"></span><br><span class="line">Request request = new Request.Builder()</span><br><span class="line"></span><br><span class="line">    .url(&quot;http://192.168.1.103:8080/okHttpServer/fileUpload&quot;)</span><br><span class="line"></span><br><span class="line">    .post(requestBody)</span><br><span class="line"></span><br><span class="line">    .build();</span><br><span class="line"></span><br><span class="line">Call call = mOkHttpClient.newCall(request);</span><br><span class="line"></span><br><span class="line">call.enqueue(new Callback()&#123;...&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="开源框架"><a href="#开源框架" class="headerlink" title="开源框架"></a>开源框架</h2><p><a href="http://www.jianshu.com/p/f3227c7008d4" target="_blank" rel="external">这么多开源框架，该用哪个好？</a></p>
<h4 id="Volley"><a href="#Volley" class="headerlink" title="Volley"></a>Volley</h4><ul>
<li><p><a href="http://bxbxbai.github.io/2014/09/14/android-working-with-volley" target="_blank" rel="external">Android库Volley的使用介绍</a></p>
</li>
<li><p><a href="http://blog.csdn.net/guolin_blog/article/details/17482095" target="_blank" rel="external">Android Volley完全解析(一)，初识Volley的基本用法</a></p>
</li>
<li><p><a href="http://blog.csdn.net/guolin_blog/article/details/17482165" target="_blank" rel="external"> Android Volley完全解析(二)，使用Volley加载网络图片</a></p>
</li>
<li><p><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0720/3209.html" target="_blank" rel="external">android网络操作I： OkHttp, Volley以及Gson</a></p>
</li>
</ul>
<h4 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a>Retrofit</h4><ul>
<li><p><a href="https://realm.io/cn/news/droidcon-jake-wharton-simple-http-retrofit-2/" target="_blank" rel="external">用 Retrofit 2 简化 HTTP 请求</a></p>
</li>
<li><p><a href="http://www.tuicool.com/articles/NnuIva" target="_blank" rel="external">Retrofit – Java(Android) 的REST 接口封装类库</a></p>
</li>
<li><p><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0915/3460.html" target="_blank" rel="external">Retrofit 2.0：有史以来最大的改进</a></p>
</li>
<li><p><a href="http://www.stay4it.com/course/22" target="_blank" rel="external">Retrofit分析-漂亮的解耦套路(视频版)</a></p>
</li>
</ul>
<h4 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h4><ul>
<li><p>网络层： Retrofit或者Volley＋OkHttp，async-http-lib尽量就别用了，比较老。</p>
</li>
<li><p>数据库： GreenDao, Ormlite或者Realm，要加密的话用SqlCipher</p>
</li>
<li><p>图片缓存： Fresco， glide，如果集成的效果不理想，多看看配置参数是否正确</p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[搭建一个优秀的Android项目]]></title>
      <url>http://yoursite.com/2016/06/05/%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%BC%98%E7%A7%80%E7%9A%84Android%E9%A1%B9%E7%9B%AE/</url>
      <content type="html"><![CDATA[<blockquote>
<p>很多时候，尤其是经验不足开发者，通常会不重视项目搭建前的准备工作，随着项目越来越大，我们会碰到很多需要修改前期代码，甚至整个架构，这给我们带来了很大的不便。本文主要价绍一些项目开发前的准备工作。</p>
</blockquote>
<a id="more"></a>
<h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>MVP是不可回避的，Android本身也遵循MVP结构，这里我想谈谈我在开发过程中常用的结构。</p>
<ul>
<li>base —- 自定义的父类，如BaseActivity, 自定义接口，BaseApplication等。</li>
<li>global —- 全局字段相关的类GlobalConstants，格式转化FormFactory</li>
<li>date —- 数据请求</li>
<li>utils —-工具类集合</li>
<li>widgets —- 各个可复用View集合</li>
</ul>
<p>你会发现没有UI，我一般是将UI根据功能模块划分例如用户模块</p>
<ul>
<li>Account<br>&emsp;activity<br>&emsp;fragment<br>&emsp;…</li>
</ul>
<h2 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h2><ul>
<li>先在color.xml中写好需要的颜色：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;color name=&quot;Orange&quot;&gt;#ff5722&lt;/color&gt;</span><br><span class="line">    &lt;color name=&quot;DeepPurple&quot;&gt;#673AB7&lt;/color&gt;</span><br><span class="line">    &lt;color name=&quot;DeepPurple900&quot;&gt;#311B92&lt;/color&gt;</span><br><span class="line">    &lt;color name=&quot;White&quot;&gt;#fff&lt;/color&gt;</span><br><span class="line">    &lt;color name=&quot;Gray&quot;&gt;#888888&lt;/color&gt;</span><br><span class="line">    &lt;color name=&quot;Gray100&quot;&gt;#dddddd&lt;/color&gt;</span><br><span class="line">    &lt;color name=&quot;Gray600&quot;&gt;#999999&lt;/color&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>注意color.xml是配色表。应该是描述颜色而不是对字体颜色，背景颜色等的定义。这样能防止相近的颜色重复定义。而导致界面颜色不统一。</p>
<ul>
<li>在style.xml里定义主题：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;AppTheme.Base&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;</span><br><span class="line">    &lt;!-- Customize your theme here. --&gt;</span><br><span class="line">    &lt;item name=&quot;colorPrimary&quot;&gt;@color/DeepPurple&lt;/item&gt;</span><br><span class="line">    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/DeepPurple900&lt;/item&gt;</span><br><span class="line">    &lt;item name=&quot;colorAccent&quot;&gt;@color/Orange&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;AppTheme.Base&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在res目录下，创建一个values-v21目录，再创建一个style.xml:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;AppTheme.Base&quot;&gt;</span><br><span class="line">    &lt;item name=&quot;android:windowDrawsSystemBarBackgrounds&quot;&gt;true&lt;/item&gt;</span><br><span class="line">    &lt;item name=&quot;android:statusBarColor&quot;&gt;?colorPrimaryDark&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="依赖库与SDK"><a href="#依赖库与SDK" class="headerlink" title="依赖库与SDK"></a>依赖库与SDK</h2><ul>
<li>android-async-http —- 网络请求库</li>
<li>Android-Universal-Image-Loader 异步图片加载库</li>
<li>Volley —- 2013年Google I/O大会上推出了一个新的网络通信框架(上面两个综合体)</li>
<li><a href="https://github.com/Jude95/RollViewPager" target="_blank" rel="external">RollViewPager</a>—-自动轮播使用方便的ViewPager</li>
<li><a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="external">butterknife</a>—-View注解库和配套插件<a href="https://github.com/avast/android-butterknife-zelezny" target="_blank" rel="external">android-butterknife-zelezny</a></li>
<li>Bmob —- 第三方后台，极大的提升了开发效率。</li>
<li>Mob —- 第三方短信</li>
<li>友盟 —- 数据统计,推送，意见反馈，自动更新，第三方分享及登录,社区</li>
<li>科大讯飞 —- 语音的领导者</li>
</ul>
<h2 id="制定开发规范"><a href="#制定开发规范" class="headerlink" title="制定开发规范"></a>制定开发规范</h2><p>所有Activity继承BaseActivity<br>所有包含Fragment的Activity集成BaseFragmentActivity，BaseFragmentActivity也是集成aseActivity<br>所有Fragment继承BaseFragment<br>这样利于生命周期管理。也可以方便的全局修改。</p>
<p>全局变量命名:以m开头。例mAdapter使用时按一个m全都出来了</p>
<p>drawable文件下命名<br>selector_bg_1<br>shape_bg_corner_1</p>
<p>id命名，然后用butterknife的插件生成变量会自动将下划线变成驼峰命名<br>btn_send<br>tv_name<br>list_persons<br>et_password</p>
<p>layout布局文件命名<br>view_xxx  自定义布局<br>activity_xxx<br>include_xxx</p>
<h2 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h2><p>这几篇文章在我的学习过程中提供了很大帮助<br><a href="http://www.jianshu.com/p/d9e4ddd1c530" target="_blank" rel="external">一个优秀的Android应用从建项目开始</a><br><a href="http://android.jobbole.com/82375/" target="_blank" rel="external">从零开始搭建架构实施Android项目</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android自定义组合控件]]></title>
      <url>http://yoursite.com/2016/06/05/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E5%90%88%E6%8E%A7%E4%BB%B6/</url>
      <content type="html"><![CDATA[<blockquote>
<p>项目开发中，通过会遇到很多控件复用的情况，如果每次都重写一遍显然是不理智的，这样不仅造成代码冗余，而且修改起来也很麻烦</p>
</blockquote>
<a id="more"></a>
<p>先上效果图<br>注意第一行的变换，<br><img src="/uploads/zdizhkj2.jpg" width="180" height="320" alt="点击第一行前"><br>当点击第一行时<br><img src="/uploads/zdizhkj1.jpg" width="180" height="320" alt="点击第一行后"></p>
<h4 id="定义一个XML布局文件"><a href="#定义一个XML布局文件" class="headerlink" title="定义一个XML布局文件"></a>定义一个XML布局文件</h4><p>view_load_date.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:id=&quot;@+id/rl_content&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;50dp&quot;</span><br><span class="line">        android:background=&quot;@color/white&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;EditText</span><br><span class="line">            android:id=&quot;@+id/et_title&quot;</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_centerVertical=&quot;true&quot;</span><br><span class="line">            android:layout_marginLeft=&quot;15dp&quot;</span><br><span class="line">            android:background=&quot;@color/white&quot;</span><br><span class="line">            android:textSize=&quot;18sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_title&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_alignLeft=&quot;@id/et_title&quot;</span><br><span class="line">            android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">            android:clickable=&quot;false&quot;</span><br><span class="line">            android:focusable=&quot;false&quot;</span><br><span class="line">            android:textSize=&quot;10sp&quot;</span><br><span class="line">            android:visibility=&quot;gone&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;View</span><br><span class="line">            android:id=&quot;@+id/v_arrow&quot;</span><br><span class="line">            android:layout_width=&quot;7dp&quot;</span><br><span class="line">            android:layout_height=&quot;15dp&quot;</span><br><span class="line">            android:layout_alignParentRight=&quot;true&quot;</span><br><span class="line">            android:layout_centerVertical=&quot;true&quot;</span><br><span class="line">            android:layout_marginRight=&quot;20dp&quot;</span><br><span class="line">            android:background=&quot;@mipmap/right_arrow&quot;</span><br><span class="line">            android:clickable=&quot;false&quot;</span><br><span class="line">            android:focusable=&quot;false&quot; /&gt;</span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="在src-values-attrs-xml中定义属性"><a href="#在src-values-attrs-xml中定义属性" class="headerlink" title="在src/values/attrs.xml中定义属性"></a>在src/values/attrs.xml中定义属性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!--自定义--&gt;</span><br><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;!--必须是declare-styleable--&gt;</span><br><span class="line">    &lt;declare-styleable name=&quot;xgg_attr&quot;&gt;</span><br><span class="line">        &lt;attr name=&quot;mTopHint&quot; format=&quot;string&quot; /&gt;</span><br><span class="line">        &lt;attr name=&quot;mBottomHint&quot; format=&quot;string&quot; /&gt;</span><br><span class="line">        &lt;attr name=&quot;mTopText&quot; format=&quot;string&quot; /&gt;</span><br><span class="line">        &lt;attr name=&quot;mColorText&quot; format=&quot;color&quot; /&gt;</span><br><span class="line">        &lt;attr name=&quot;mColorHint&quot; format=&quot;color&quot; /&gt;</span><br><span class="line">        &lt;attr name=&quot;mShowRight&quot; format=&quot;boolean&quot; /&gt;</span><br><span class="line">        &lt;attr name=&quot;android:inputType&quot; /&gt;</span><br><span class="line">    &lt;/declare-styleable&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<h4 id="自定义一个view继承自你需要的布局"><a href="#自定义一个view继承自你需要的布局" class="headerlink" title="自定义一个view继承自你需要的布局"></a>自定义一个view继承自你需要的布局</h4><p>根据需求自定义一些API方法<br>MyEditText.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">public class MyEditText extends RelativeLayout &#123;</span><br><span class="line"></span><br><span class="line">    public EditText etTitle;</span><br><span class="line">    TextView tvTitle;</span><br><span class="line"></span><br><span class="line">    private String mTopHint;//正文(顶部)提示语</span><br><span class="line">    private String mBottomHint;//底部提示语</span><br><span class="line"></span><br><span class="line">    public String getmTopText() &#123;</span><br><span class="line">        return etTitle.getText().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setmTopText(String mTopText) &#123;</span><br><span class="line">        etTitle.setText(mTopText);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String mTopText;//文字</span><br><span class="line">    private int mColorText;//Text文字颜色</span><br><span class="line">    private int mColorHint;//Hint文字颜色</span><br><span class="line">    private Boolean mShowRight;//是否显示向右箭头</span><br><span class="line">    private int inputType;</span><br><span class="line">    private View vArrow;//箭头</span><br><span class="line"></span><br><span class="line">    public MyEditText(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">        init(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public MyEditText(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">        init(context);</span><br><span class="line">        initAttrs(context, attrs);</span><br><span class="line">        initDate();</span><br><span class="line">        initListener();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public MyEditText(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        super(context, attrs, defStyleAttr);</span><br><span class="line">        init(context);</span><br><span class="line">        initAttrs(context, attrs);</span><br><span class="line">        initDate();</span><br><span class="line">        initListener();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void init(Context context) &#123;</span><br><span class="line">        //加载视图的布局</span><br><span class="line">        LayoutInflater.from(context).inflate(R.layout.view_my_edittext, this);</span><br><span class="line">        etTitle = (EditText) findViewById(R.id.et_title);</span><br><span class="line">        tvTitle = (TextView) findViewById(R.id.tv_title);</span><br><span class="line">        vArrow = findViewById(R.id.v_arrow);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void initAttrs(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        //加载自定义的属性</span><br><span class="line">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.xgg_attr);</span><br><span class="line">        mTopHint = a.getString(R.styleable.xgg_attr_mTopHint);</span><br><span class="line">        mTopText = a.getString(R.styleable.xgg_attr_mTopText);</span><br><span class="line">        mBottomHint = a.getString(R.styleable.xgg_attr_mBottomHint);</span><br><span class="line">        mColorText = a.getColor(R.styleable.xgg_attr_mColorText, 0);</span><br><span class="line">        mColorHint = a.getColor(R.styleable.xgg_attr_mColorHint, 0);</span><br><span class="line">        mShowRight = a.getBoolean(R.styleable.xgg_attr_mShowRight, true);</span><br><span class="line">        //加载系统已经定义的属性</span><br><span class="line">        inputType = a.getInt(R.styleable.xgg_attr_android_inputType, InputType.TYPE_TEXT_VARIATION_PASSWORD);</span><br><span class="line">        //回收资源，这一句必须调用</span><br><span class="line">        a.recycle();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void initDate() &#123;</span><br><span class="line">        etTitle.setTextColor(mColorText);</span><br><span class="line">        etTitle.setInputType(inputType);</span><br><span class="line">        tvTitle.setText(mBottomHint);</span><br><span class="line">        tvTitle.setTextColor(mColorHint);</span><br><span class="line">        if (!mShowRight) &#123;</span><br><span class="line">            etTitle.setText(mTopText);</span><br><span class="line">            etTitle.setFocusable(false);</span><br><span class="line">            etTitle.setClickable(false);</span><br><span class="line">            tvTitle.setVisibility(View.VISIBLE);</span><br><span class="line">            vArrow.setVisibility(View.GONE);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            etTitle.setHint(mTopHint);</span><br><span class="line">            etTitle.setHintTextColor(mColorHint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	//对点击事件的处理</span><br><span class="line">    private void initListener() &#123;</span><br><span class="line">        etTitle.setOnFocusChangeListener(new OnFocusChangeListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onFocusChange(View v, boolean hasFocus) &#123;</span><br><span class="line">                if (hasFocus) &#123;</span><br><span class="line">                    tvTitle.setVisibility(View.VISIBLE);</span><br><span class="line">                    etTitle.setHintTextColor(getResources().getColor(R.color.transparent));</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    if (TextUtils.isEmpty(etTitle.getText())) &#123;</span><br><span class="line">                        tvTitle.setVisibility(View.GONE);</span><br><span class="line">                        etTitle.setHintTextColor(mColorHint);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    //对外提供的接口</span><br><span class="line">    public void setTextChangedListener(MyTextChangedListener listener) &#123;</span><br><span class="line">        mListener = listener;</span><br><span class="line">        etTitle.addTextChangedListener(new TextWatcher() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void beforeTextChanged(CharSequence s, int start, int count, int after) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onTextChanged(CharSequence s, int start, int before, int count) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void afterTextChanged(Editable s) &#123;</span><br><span class="line">                mListener.afterTextChanged(MyEditText.this);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyTextChangedListener mListener;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="在布局文件中使用该自定义组合控件"><a href="#在布局文件中使用该自定义组合控件" class="headerlink" title="在布局文件中使用该自定义组合控件"></a>在布局文件中使用该自定义组合控件</h4><p>别忘记声明自定义命名空间<br>xmlns:shun=”<a href="http://schemas.android.com/apk/res/包名" target="_blank" rel="external">http://schemas.android.com/apk/res/包名</a>“<br>或者<br>xmlns:shun=”<a href="http://schemas.android.com/apk/res-auto" target="_blank" rel="external">http://schemas.android.com/apk/res-auto</a>“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:xgg=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:background=&quot;@color/bg&quot;</span><br><span class="line">    android:focusable=&quot;true&quot;</span><br><span class="line">    android:focusableInTouchMode=&quot;true&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.xgg.xiangguagua.widget.MyEditText</span><br><span class="line">        android:id=&quot;@+id/met_title&quot;</span><br><span class="line">        style=&quot;@style/release_met&quot;</span><br><span class="line">        xgg:mBottomHint=&quot;商品标题&quot;</span><br><span class="line">        xgg:mColorHint=&quot;@color/text_2&quot;</span><br><span class="line">        xgg:mColorText=&quot;@color/text_1&quot;</span><br><span class="line">        xgg:mTopHint=&quot;请输入活动标题&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hexo使用心得]]></title>
      <url>http://yoursite.com/2016/06/02/Hexo%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/</url>
      <content type="html"><![CDATA[<blockquote>
<p>这篇文章主要是总结自己在使用hexo创建博客时的一些使用心得。</p>
</blockquote>
<a id="more"></a>
<h2 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h2><ul>
<li><p>创建文章<br><code>$ hexo n &quot;Hexo使用心得&quot;</code><br>文章子在根节点下\source_posts下,且文件名是“Hexo使用心得”<br><img src="/uploads/hexo_syxd_1.png" alt=""></p>
</li>
<li><p>创建页面<br><code>$ hexo n page &quot;about&quot;</code><br>新页面在根节点下\source\新页面下，且文件名是“index”,<br><img src="/uploads/hexo_syxd_3.png" alt=""></p>
</li>
<li><p>存放图片<br>放在主题下的sources下<br><img src="/uploads/hexo_syxd_2.png" alt=""><br>这里的uploads文件夹是自己创建的，方便统一管理图片</p>
</li>
<li><p>使用图片<br>/uploads/图片名 即可</p>
</li>
</ul>
<ul>
<li><p>为文章如何设置「阅读全文」</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用 &lt;!-- more --&gt;这种方式也可以让 Hexo 中的插件更好的识别。</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭页面或文章的评论功能<br>在常见页面的是的标签（tags）下添加<br><code>comments: false</code></p>
</li>
</ul>
<h2 id="hexo命令"><a href="#hexo命令" class="headerlink" title="hexo命令"></a>hexo命令</h2><ul>
<li><p>常用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;postName&quot; #新建文章</span><br><span class="line">hexo new page &quot;pageName&quot; #新建页面</span><br><span class="line">hexo generate #生成静态页面至public目录</span><br><span class="line">hexo server #开启预览访问端口（默认端口4000，&apos;ctrl + c&apos;关闭server）</span><br><span class="line">hexo deploy #将.deploy目录部署到GitHub</span><br></pre></td></tr></table></figure>
</li>
<li><p>常用复合命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo d -g #生成加部署</span><br><span class="line">hexo s -g #预览加部署</span><br></pre></td></tr></table></figure>
</li>
<li><p>简写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Hexo安装过程"><a href="#Hexo安装过程" class="headerlink" title="Hexo安装过程"></a>Hexo安装过程</h2><ul>
<li><p>1 打开git</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo</span><br></pre></td></tr></table></figure>
</li>
<li><p>2 部署Hexo<br>在我的电脑中建立一个名字叫「Hexo」的文件夹，然后在此文件夹中右键打开Git Bash。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure>
</li>
<li><p>3 Hexo随后会自动在目标文件夹建立网站所需要的所有文件。现在我们已经搭建起本地的hexo博客了，执行以下命令(在Hexo项目的根目录下)，然后到浏览器输入localhost:4000看看。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
</li>
<li><p>4 更新主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/cnfeat/cnfeat.git themes/jacman</span><br></pre></td></tr></table></figure>
</li>
<li><p>5 启用cnfeat的主题<br>修改Hexo目录下的config.yml配置文件中的theme属性，将其设置为jacman。同时请设置stylus属性中的compress值为true。</p>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>有关头像陪著，等等其他的问题请参考下面的资料<br><a href="http://theme-next.iissnan.com/getting-started.html#avatar-setting" target="_blank" rel="external">Next主题使用说明书</a><br><a href="http://www.jianshu.com/p/05289a4bc8b2" target="_blank" rel="external">如何搭建一个独立博客–简明Github Pages与Hexo教程</a></p>
]]></content>
    </entry>
    
  
  
</search>
